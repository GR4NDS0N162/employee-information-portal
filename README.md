# Информационный портал сотрудников

Все страницы сайта являются доступными только залогиненным пользователям, кроме логина и регистрации.

## Пользовательская часть

### Страница логина/регистрации пользователя.

Поля формы логина:

- E-mail
- Пароль

На странице логина, должны быть кнопки регистрации и забыл пароль. По нажатию на них, появляются соответствующие формы без перезагрузки страницы.

Поля формы регистрации:

- E-mail
- Должность (Заполняется только при регистрации и в дальнейшем может изменяться только администратором. Сделать в виде дропдауна, варианты выбора настраиваются в панели администрирования)
- Пароль
- Подтверждение пароля

Поля формы "забыл пароль":

- E-mail

При успешном заполнении формы “забыл пароль”, пользователю присылается новый автоматически сгенерированный пароль. Сразу после регистрации пользователь не активен до тех пор, пока его не активирует администратор.

### Страница редактирования профиля

Поля формы редактирования профиля:

- Фамилия
- Имя
- Отчество
- Пол
- Дата рождения
- Фото
- Телефоны (может быть неограниченное количество)
- E-mail-ы (может быть неограниченное количество)
- Skype

Также необходимо предусмотреть смену пароля.

### Страница просмотра профиля

Выводится вся информация о пользователе.

### Страница со списком пользователей

На странице выводятся все активные пользователи постранично (по 20 на каждой странице).

На странице доступны следующие фильтры:

- Должность
- Пол (стандартный дропдаун)
- Возраст (Настраивается промежуток, два поля, от и до)
- Фильтр по ФИО, номеру телефона, email-y (единая строка)Фильтрация и переключение страниц должны работать асинхронно без перезагрузки страницы (ajax).

Также необходимо добавить сортировки по отображаемым полям.

## Администрирования системы

Все пункты панели администрирования является отдельными от пользовательской части страницами. Когда пользователь является администратором у него появляются отдельные пункты в меню, которые описаны далее.

### Список пользователей

На странице показывается все пользователи, неактивные пользователи должны отличаться визуально. Пользователи должны выводиться постранично (по 20 на каждой странице).

На странице доступны следующие фильтры:

- Должность
- Пол (стандартный дропдаун)
- Возраст (Настраивается промежуток, два поля, от и до)
- Фильтр по ФИО, номеру телефона, email-y (единая строка)
- Активен (да / нет) - по дефолту показываются только активные пользователи
- Администратор (да / нет)

Фильтрация и переключение страниц должны работать асинхронно без перезагрузки страницы (ajax). Также необходимо добавить сортировки по отображаемым полям.

### Страница редактирования профиля пользователя

Доступны те же поля, что и для обычного пользователя. Дополнительные доступные поля:

- Активен
- Должность. Отображается в виде списка.
- Администратор (да / нет)

Администратор может изменить пароль пользователю вручную или отправить ему новый авто-сгенерированный пароль на email.

### Управление должностями

Должен показываться список текущих доступных должностей и должна быть возможность их изменять, редактировать и удалять.

## Подсистема сообщений

У каждого пользователя должна быть отдельная страница с сообщениями. На этой странице отображается список диалогов с другими пользователями.

На странице доступны следующие фильтры:

- Должность
- Пол (стандартный дропдаун)
- Возраст (Настраивается промежуток, два поля, от и до)
- Фильтр по ФИО и номеру телефона (единая строка)

При фильтрации сначала показываются те пользователи, с которыми уже есть диалог. Затем отображаются пользователи, с которыми диалога нет и появляется возможность создать новый диалог. У каждого пользователя с любым другим пользователем может быть только 1 диалог. Фильтрация должна работать асинхронно без перезагрузки страницы (ajax).

На странице с диалогом показываются последние 20 сообщений. Должна быть кнопка "загрузить еще", при нажатии на которую будут подгружаться еще 20 сообщений.

Также на этой странице должна быть форма отправки нового сообщения. Новые сообщения автоматически появляться не должны (только после перезагрузки страницы).

У каждого сообщения должны быть дата и время отправки и дата время когда его открыли.

Когда пользователю приходит сообщение, и он не прочел его в течении 15 минут, ему на почту должен прийти email со ссылкой на это сообщение и информацией об отправителе.
